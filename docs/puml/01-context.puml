@startuml
title nas-samples - Context

skinparam linetype ortho
skinparam packageStyle rectangle
hide stereotype

actor "Admin / GitOps" as Admin
actor "SMB Client
(Windows/macOS)" as Client

package "Kubernetes (Minikube)" {
  [nas-operator] as Operator
  [nas-node-agent
(DaemonSet)] as Agent
  [Samba Share Pod
(per NASShare)] as Samba
  database "ZFS Pool/Datasets
(on Node)" as ZFS
}

Admin --> Operator : apply CRDs
(ZPool/ZDataset/NASShare/...)
Operator --> Agent : HTTP (authenticated)
ZFS operations
Agent --> ZFS : zpool/zfs
Operator --> Samba : Deployments/Services
ConfigMap(smb.conf)
Secrets(users)
Client --> Samba : SMB over NodePort

@enduml
